<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio</title>
    <link rel="stylesheet" href="Inicio.css">
</head>
<body>
    <div class="navbar">
        <img src="../imagenes/logo.jpg" alt="Logotipo" class="logo">
        <div class="title" onclick="location.href='../index.html'" style="cursor: pointer;">NETControl</div>
        <ul class="menu">
            <li><a href="Inicio.html">Inicio</a></li>
            <li><a href="Fallas.html">Fallas</a></li>
            <li><a href="Dispositivos.html">Dispositivos</a></li>
            <li><a href="Inventario.html">Inventario</a></li>
            <li><a href="Ajustes.html">Ajustes</a></li>
            <li><a href="Mantenimiento.html">Mantenimiento</a></li>
        </ul>
    </div>
    <h1>Bienvenido a la p치gina de Inicio</h1>
    <button onclick="iniciarPrueba()">Iniciar Prueba</button>
    <div id="resultados">
        <p>Velocidad de descarga: <span id="download">-</span> Mbps</p>
        <p>Velocidad de subida: <span id="upload">-</span> Mbps</p>
        <p>Ping: <span id="ping">-</span> ms</p>
    </div>
    <script>
        function iniciarPrueba() {
            // Limpia los resultados anteriores
            document.getElementById('download').textContent = '...';
            document.getElementById('upload').textContent = '...';
            document.getElementById('ping').textContent = '...';

            // Realiza la solicitud al servidor Flask
            fetch('http://127.0.0.1:5000/iniciar_prueba?t=' + new Date().getTime())
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Error en la solicitud: ' + response.statusText);
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.error) {
                        // Muestra el error en la consola y en la p치gina
                        console.error('Error del servidor:', data.error);
                        alert('Error: ' + data.error);
                    } else {
                        // Muestra los resultados en la p치gina
                        document.getElementById('download').textContent = data.download;
                        document.getElementById('upload').textContent = data.upload;
                        document.getElementById('ping').textContent = data.ping;
                    }
                })
                .catch(error => {
                    // Muestra errores de red o de la solicitud
                    console.error('Error:', error);
                    alert('Error al conectar con el servidor. Verifica la consola para m치s detalles.');
                });
        }
    </script>
</body>
</html>